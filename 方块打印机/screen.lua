font={{data="001111110100100001001000010010000011111100000000" , c="A"},{data="011111110100100101001001010010010011011000000000" , c="B"},{data="001111100100000101000001010000010010001000000000" , c="C"},{data="011111110100000101000001001000100001110000000000" , c="D"},{data="011111110100100101001001010010010100000100000000" , c="E"},{data="011111110100100001001000010010000100000000000000" , c="F"},{data="001111100100000101000001010010010100111100000000" , c="G"},{data="011111110000100000001000000010000111111100000000" , c="H"},{data="000000000100000101111111010000010000000000000000" , c="I"},{data="000000100000000101000001011111100100000000000000" , c="J"},{data="011111110000100000010100001000100100000100000000" , c="K"},{data="011111110000000100000001000000010000000100000000" , c="L"},{data="011111110010000000011000001000000111111100000000" , c="M"},{data="011111110001000000001000000001000111111100000000" , c="N"},{data="001111100100000101000001010000010011111000000000" , c="O"},{data="011111110100100001001000010010000011000000000000" , c="P"},{data="001111100100000101000101010000100011110100000000" , c="Q"},{data="011111110100100001001100010010100011000100000000" , c="R"},{data="001100100100100101001001010010010000011000000000" , c="S"},{data="010000000100000001111111010000000100000000000000" , c="T"},{data="011111100000000100000001000000010111111000000000" , c="U"},{data="011111000000001000000001000000100111110000000000" , c="V"},{data="011111100000000100011110000000010111111000000000" , c="W"},{data="011000110001010000001000000101000110001100000000" , c="X"},{data="011000000001000000001111000100000110000000000000" , c="Y"},{data="010000110100010101001001010100010110000100000000" , c="Z"},{data="000000100001010100010101000101010000111100000000" , c="a"},{data="011111110000101000010001000100010000111000000000" , c="b"},{data="000011100001000100010001000100010000001000000000" , c="c"},{data="000011100001000100010001000010100111111100000000" , c="d"},{data="000011100001010100010101000101010000110000000000" , c="e"},{data="000010000011111101001000010000000010000000000000" , c="f"},{data="000010000001010100010101000101010001111000000000" , c="g"},{data="011111110000100000010000000100000000111100000000" , c="h"},{data="000000000001000101011111000000010000000000000000" , c="i"},{data="000000000000001000000001000100010101111000000000" , c="j"},{data="011111110000010000001010000100010000000000000000" , c="k"},{data="000000000100000101111111000000010000000000000000" , c="l"},{data="000111110001000000001100000100000000111100000000" , c="m"},{data="000111110000100000010000000100000000111100000000" , c="n"},{data="000011100001000100010001000100010000111000000000" , c="o"},{data="000111110001010000010100000101000000100000000000" , c="p"},{data="000010000001010000010100000101000001111100000000" , c="q"},{data="000111110000100000010000000100000000100000000000" , c="r"},{data="000010000001010100010101000101010000001000000000" , c="s"},{data="000100000111111000010001000000010000001000000000" , c="t"},{data="000111100000000100000001000000100001111100000000" , c="u"},{data="000111000000001000000001000000100001110000000000" , c="v"},{data="000111110000001000000100000000100001111100000000" , c="w"},{data="000100010000101000000100000010100001000100000000" , c="x"},{data="000110000000010100000101000001010001111000000000" , c="y"},{data="000100010001001100010101000110010001000100000000" , c="z"},{data="000000000000011000000110000000000000000000000000" , c="."},{data="001111100100010101001001010100010011111000000000" , c="0"},{data="000000000010000101111111000000010000000000000000" , c="1"},{data="001000010100001101000101010010010011000100000000" , c="2"},{data="010000100100000101010001011010010100011000000000" , c="3"},{data="000011000001010000100100011111110000010000000000" , c="4"},{data="011100100101000101010001010100010100111000000000" , c="5"},{data="000111100010100101001001010010010000011000000000" , c="6"},{data="010000000100011101001000010100000110000000000000" , c="7"},{data="001101100100100101001001010010010011011000000000" , c="8"},{data="001100000100100101001001010010100011110000000000" , c="9"},{data="000000000000010100000110000000000000000000000000" , c=","},{data="011000100110010000001000000100110010001100000000" , c="%"},{data="000000000101000001100000000000000000000000000000" , c="'"},{data="001101100100100101010101001000100000010100000000" , c="&"},{data="000000000001010000010100000101000000000000000000" , c="="},{data="001000000001000000001000000001000000001000000000" , c="\\"},{data="000000000000100000001000000010000000000000000000" , c="-"},{data="000000000011011000110110000000000000000000000000" , c=":"},{data="000000000000100000011100000010000000000000000000" , c="+"},{data="000000100000010000001000000100000010000000000000" , c="/"},{data="000000000000000000000000000000000000000000000000" , c=" "}}

function screen_printout(x,y,z,s,back,color)
	local f="000000000000000000000000000000000000000000000000";
	
	--cmd(string.format("/chat %s",s));
	for k,v in pairs(font) do
		if s==v.c then
			f=v.data;
		end;
	end;
	
	for i=0,5,1 do
		for j=0,7,1 do
			if string.sub(f,i*8+j+1,i*8+j+1)=="1" then
				blocks.set(x,y-j,z+i,color)
			else
				blocks.set(x,y-j,z+i,back)
			end;
		end;
	end;
end

function screen_layout(x,y,z,s,back,color)
	local p=0;
	i=1;
	
	while i<=string.len(s) do
		if string.sub(s,i,i)=="\n" then
			y=y-8;
			p=0;
		elseif string.sub(s,i,i)=="&" then								-- &XXXX 更换前景色
			k=tonumber(string.sub(s,i+1,i+4));
			if k then
				color=k;
				i=i+4;
			else
				screen_printout(x,y,z+p*6,"&",back,color);
				p=p+1;
			end;
		elseif string.sub(s,i,i)=="$" then								-- $XXXX 更换背景色
			k=tonumber(string.sub(s,i+1,i+4));
			if k then
				back=k;
				i=i+4;
			else
				screen_printout(x,y,z+p*6,"&",back,color);
				p=p+1;
			end;
		else
			screen_printout(x,y,z+p*6,string.sub(s,i,i),back,color);
			p=p+1;
		end
		i=i+1;
	end;
end;

function main(entity)
	screen_layout(19130,255,19150,"&0563ABCDEFGHIJKLMNOPQRSTUVWXYZ\nabcdefghijklmnopqrstuvwxyz\n.0123456789,%'&=\\-:+/\n\n$0560&0577Gogo &0576: &0561Hello.\n&0577Tony &0576: &0561Hi.\n&0577Gogo &0576: &0561I'm gogo. What's your name?\n&0577Tony &0576: &0561I'm tony.\n&0577Gogo &0576: &0561Nice to meet you, Tony.\n&0577Gogo &0576: &0561Goodbye, Tony.\n&0577Tony &0576: &0561Goodbye, Gogo!",0,580);
end